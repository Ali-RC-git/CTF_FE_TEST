<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRDF Global - Challenge Details</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-bg: #1a102b;
            --secondary-bg: #2d1b4e;
            --accent-color: #8a4fff;
            --accent-light: #a67cff;
            --accent-dark: #6b30e6;
            --text-primary: #f0e6ff;
            --text-secondary: #c2b0e6;
            --border-color: #4a2d7a;
            --card-bg: #35215a;
            --success-color: #6fcf97;
            --warning-color: #f2c94c;
            --danger-color: #eb5757;
            --gradient: linear-gradient(135deg, #6b30e6 0%, #8a4fff 100%);
        }
        
        body {
            background-color: var(--primary-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--text-primary);
        }
        
        .logo-icon {
            background: var(--gradient);
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-weight: bold;
        }
        
        .challenge-header {
            flex: 1;
        }
        
        .challenge-title {
            font-size: 32px;
            margin-bottom: 10px;
            color: var(--text-primary);
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        
        .challenge-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .difficulty {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .difficulty.medium {
            background: rgba(242, 201, 76, 0.2);
            color: var(--warning-color);
        }
        
        .points {
            color: var(--accent-light);
            font-weight: bold;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
        }
        
        .btn-primary {
            background: var(--gradient);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(138, 79, 255, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--accent-color);
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            margin-bottom: 25px;
        }
        
        .card-title {
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--accent-light);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-icon {
            font-size: 24px;
        }
        
        .scenario-content, .artifacts-content, .questions-content {
            line-height: 1.7;
        }
        
        .scenario-content p, .artifacts-content p, .questions-content p {
            margin-bottom: 15px;
        }
        
        .highlight-box {
            background: rgba(138, 79, 255, 0.1);
            border-left: 4px solid var(--accent-color);
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }
        
        .artifacts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .artifact-item {
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .artifact-item:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }
        
        .artifact-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-primary);
        }
        
        .artifact-desc {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .questions-list {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .question-item {
            background: var(--secondary-bg);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }
        
        .question-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 15px;
        }
        
        .question-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            flex: 1;
        }
        
        .question-points {
            background: var(--accent-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            white-space: nowrap;
        }
        
        .question-content {
            margin-bottom: 20px;
        }
        
        .step-list {
            margin: 15px 0;
            padding-left: 20px;
        }
        
        .step-list li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }
        
        .flag-format {
            background: rgba(111, 207, 151, 0.1);
            border: 1px solid var(--success-color);
            border-radius: 6px;
            padding: 12px 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 14px;
        }
        
        .flag-submission {
            background: var(--secondary-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid var(--border-color);
        }
        
        .submission-form {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .flag-input {
            flex: 1;
            padding: 12px 15px;
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: monospace;
            font-size: 14px;
        }
        
        .flag-input:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        
        .submission-feedback {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }
        
        .submission-feedback.correct {
            background: rgba(111, 207, 151, 0.1);
            border: 1px solid var(--success-color);
            color: var(--success-color);
            display: block;
        }
        
        .submission-feedback.incorrect {
            background: rgba(235, 87, 87, 0.1);
            border: 1px solid var(--danger-color);
            color: var(--danger-color);
            display: block;
        }
        
        .progress-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .progress-bar {
            flex: 1;
            height: 6px;
            background: var(--primary-bg);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--gradient);
            border-radius: 3px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .resources-section {
            margin-top: 30px;
        }
        
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .resource-item {
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
            color: var(--text-primary);
        }
        
        .resource-item:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }
        
        .resource-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .timer {
            background: var(--secondary-bg);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
        }
        
        .timer-text {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .timer-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent-light);
            font-family: monospace;
        }
        
        .completion-badge {
            background: var(--success-color);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
            }
            
            .submission-form {
                flex-direction: column;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-buttons .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">C</div>
                CRDF Global
            </div>
            
            <div class="challenge-header">
                <h1 class="challenge-title">Midnight Credentials - OT Edition</h1>
                <div class="challenge-meta">
                    <div class="meta-item">
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="meta-item">
                        <span>🔒</span>
                        <span>OT/ICS Security</span>
                    </div>
                    <div class="meta-item">
                        <span>⏱️</span>
                        <span>Estimated: 45-60 mins</span>
                    </div>
                    <div class="meta-item">
                        <span>🏆</span>
                        <span class="points">40 pts total</span>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <a href="#" class="btn btn-secondary">
                    <span>📋</span>
                    Back to Challenges
                </a>
                <button class="btn btn-primary" id="hint-btn">
                    <span>💡</span>
                    Get Hint (-5 pts)
                </button>
            </div>
        </div>

        <!-- Timer Section -->
        <div class="timer">
            <div class="timer-text">Time spent on this challenge:</div>
            <div class="timer-value" id="challenge-timer">00:25:43</div>
        </div>

        <!-- Scenario Card -->
        <div class="card">
            <h2 class="card-title">
                <span class="card-icon">🎯</span>
                Scenario (OT/ICS Context)
            </h2>
            <div class="scenario-content">
                <p>A water treatment plant's engineering workstation (which has access to PLC programming and HMI configuration) shows signs of unauthorized activity. An attacker appears to have used compromised credentials to log into an engineering workstation, elevated privileges, and accessed control-related files. The artifacts provided are offline and safe for training.</p>
                
                <div class="highlight-box">
                    <strong>OT/ICS Context Notes:</strong>
                    <ul class="step-list">
                        <li>The engineering workstation is used by OT staff to manage PLC setpoints and HMI screens.</li>
                        <li>Compromise of service accounts on this host can directly affect process control.</li>
                        <li>For safety, all exercises are offline and use synthetic artifacts.</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Artifacts Card -->
        <div class="card">
            <h2 class="card-title">
                <span class="card-icon">📁</span>
                Artifacts You Will Use
            </h2>
            <div class="artifacts-content">
                <p>Download and analyze these files to solve the challenge:</p>
                
                <div class="artifacts-grid">
                    <div class="artifact-item">
                        <div class="artifact-name">wordlist_small.txt</div>
                        <div class="artifact-desc">Password wordlist for cracking</div>
                    </div>
                    <div class="artifact-item">
                        <div class="artifact-name">john_input_rawmd5.txt</div>
                        <div class="artifact-desc">MD5 hashes for password cracking</div>
                    </div>
                    <div class="artifact-item">
                        <div class="artifact-name">auth.log</div>
                        <div class="artifact-desc">Authentication logs from engineering workstation</div>
                    </div>
                    <div class="artifact-item">
                        <div class="artifact-name">investigation_notes.txt</div>
                        <div class="artifact-desc">Initial investigation findings</div>
                    </div>
                    <div class="artifact-item">
                        <div class="artifact-name">passwd_copy.txt</div>
                        <div class="artifact-desc">User account information</div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary">
                        <span>📥</span>
                        Download All Artifacts
                    </button>
                </div>
            </div>
        </div>

        <!-- Questions Card -->
        <div class="card">
            <h2 class="card-title">
                <span class="card-icon">❓</span>
                Questions
            </h2>
            <div class="questions-content">
                <div class="questions-list">
                    <!-- Question 1 -->
                    <div class="question-item">
                        <div class="question-header">
                            <div class="question-title">Q1. Crack the password for svc_backup</div>
                            <div class="question-points">30 pts</div>
                        </div>
                        <div class="question-content">
                            <p>Crack the password for svc_backup (an OT service account used for PLC backups) and submit the flag.</p>
                            
                            <div class="flag-format">
                                Flag format: cracked_svc_backup_&lt;password&gt;
                            </div>
                            
                            <strong>Step-by-step:</strong>
                            <ol class="step-list">
                                <li>Use john with --format=raw-md5 and the provided wordlist to crack john_input_rawmd5.txt</li>
                                <li>Identify the password for svc_backup</li>
                                <li>Submit as cracked_svc_backup_&lt;password&gt;</li>
                            </ol>
                            
                            <div class="highlight-box">
                                <strong>Why this matters:</strong> Compromised OT service accounts can be used to alter PLCs or exfiltrate control logic.
                            </div>
                        </div>
                        
                        <div class="flag-submission">
                            <div class="submission-form">
                                <input type="text" class="flag-input" placeholder="Enter flag: cracked_svc_backup_..." id="flag-input-1">
                                <button class="btn btn-primary" onclick="submitFlag(1)">Submit Flag</button>
                            </div>
                            <div class="submission-feedback" id="feedback-1"></div>
                            <div class="progress-indicator">
                                <span>Status: </span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-1" style="width: 0%"></div>
                                </div>
                                <span id="status-1">Not attempted</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Question 2 -->
                    <div class="question-item">
                        <div class="question-header">
                            <div class="question-title">Q2. Identify Attacker IP Address</div>
                            <div class="question-points">10 pts</div>
                        </div>
                        <div class="question-content">
                            <p>Which IP did the attacker use to log in as svc_backup on the engineering workstation?</p>
                            
                            <div class="flag-format">
                                Flag format: ip_&lt;address&gt;
                            </div>
                            
                            <strong>Step-by-step:</strong>
                            <ol class="step-list">
                                <li>Open auth.log and find the Accepted password entry for svc_backup</li>
                                <li>Copy the IP address associated with that successful login</li>
                            </ol>
                            
                            <div class="highlight-box">
                                <strong>Why this matters:</strong> Identifying the source helps isolate the intrusion path and block attacker access.
                            </div>
                        </div>
                        
                        <div class="flag-submission">
                            <div class="submission-form">
                                <input type="text" class="flag-input" placeholder="Enter flag: ip_..." id="flag-input-2">
                                <button class="btn btn-primary" onclick="submitFlag(2)">Submit Flag</button>
                            </div>
                            <div class="submission-feedback" id="feedback-2"></div>
                            <div class="progress-indicator">
                                <span>Status: </span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-2" style="width: 0%"></div>
                                </div>
                                <span id="status-2">Not attempted</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resources Card -->
        <div class="card resources-section">
            <h2 class="card-title">
                <span class="card-icon">🛠️</span>
                Tools & Resources
            </h2>
            <div class="resources-grid">
                <a href="#" class="resource-item">
                    <div class="resource-icon">🔍</div>
                    <div>John the Ripper Guide</div>
                </a>
                <a href="#" class="resource-item">
                    <div class="resource-icon">📖</div>
                    <div>OT Security Basics</div>
                </a>
                <a href="#" class="resource-item">
                    <div class="resource-icon">💬</div>
                    <div>Challenge Discussion</div>
                </a>
                <a href="#" class="resource-item">
                    <div class="resource-icon">🎥</div>
                    <div>Video Walkthrough</div>
                </a>
            </div>
        </div>

        <!-- Completion Status -->
        <div class="card">
            <h2 class="card-title">
                <span class="card-icon">📊</span>
                Challenge Progress
            </h2>
            <div class="progress-indicator" style="align-items: center; margin: 0;">
                <div class="progress-bar" style="height: 12px;">
                    <div class="progress-fill" id="overall-progress" style="width: 0%"></div>
                </div>
                <span id="overall-status">0/40 points (0%)</span>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" id="complete-challenge" style="display: none;">
                    <span>✅</span>
                    Mark as Complete
                </button>
            </div>
        </div>
    </div>

    <script>
        // Challenge state
        const challengeState = {
            q1: { solved: false, points: 30 },
            q2: { solved: false, points: 10 },
            startTime: new Date(),
            hintsUsed: 0
        };

        // Correct answers (for demo purposes - in real app, this would be server-side)
        const correctAnswers = {
            q1: "cracked_svc_backup_water123",
            q2: "ip_192.168.1.205"
        };

        // Timer functionality
        function updateTimer() {
            const now = new Date();
            const diff = Math.floor((now - challengeState.startTime) / 1000);
            const hours = Math.floor(diff / 3600);
            const minutes = Math.floor((diff % 3600) / 60);
            const seconds = diff % 60;
            
            const timerElement = document.getElementById('challenge-timer');
            timerElement.textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Update timer every second
        setInterval(updateTimer, 1000);
        updateTimer(); // Initial call

        // Flag submission function
        function submitFlag(questionNumber) {
            const inputElement = document.getElementById(`flag-input-${questionNumber}`);
            const feedbackElement = document.getElementById(`feedback-${questionNumber}`);
            const progressElement = document.getElementById(`progress-${questionNumber}`);
            const statusElement = document.getElementById(`status-${questionNumber}`);
            const button = inputElement.nextElementSibling;
            
            const userAnswer = inputElement.value.trim();
            const correctAnswer = correctAnswers[`q${questionNumber}`];
            
            if (!userAnswer) {
                alert('Please enter a flag before submitting.');
                return;
            }
            
            // Disable input and button during submission
            inputElement.disabled = true;
            button.disabled = true;
            button.innerHTML = '<span>⏳</span> Checking...';
            
            // Simulate API call delay
            setTimeout(() => {
                const isCorrect = userAnswer.toLowerCase() === correctAnswer.toLowerCase();
                
                if (isCorrect) {
                    // Mark as solved
                    challengeState[`q${questionNumber}`].solved = true;
                    
                    // Update UI
                    feedbackElement.textContent = '✓ Correct! Flag accepted. Points awarded.';
                    feedbackElement.className = 'submission-feedback correct';
                    progressElement.style.width = '100%';
                    statusElement.textContent = 'Solved';
                    statusElement.style.color = 'var(--success-color)';
                    
                    // Update overall progress
                    updateOverallProgress();
                } else {
                    feedbackElement.textContent = '✗ Incorrect flag. Please try again.';
                    feedbackElement.className = 'submission-feedback incorrect';
                    
                    // Re-enable input for retry
                    inputElement.disabled = false;
                    button.disabled = false;
                    button.innerHTML = '<span>🚩</span> Submit Flag';
                }
            }, 1500);
        }

        // Update overall progress
        function updateOverallProgress() {
            const totalPoints = 40;
            let earnedPoints = 0;
            let solvedCount = 0;
            
            if (challengeState.q1.solved) {
                earnedPoints += challengeState.q1.points;
                solvedCount++;
            }
            if (challengeState.q2.solved) {
                earnedPoints += challengeState.q2.points;
                solvedCount++;
            }
            
            const progressPercentage = (earnedPoints / totalPoints) * 100;
            
            // Update progress bar
            document.getElementById('overall-progress').style.width = `${progressPercentage}%`;
            document.getElementById('overall-status').textContent = 
                `${earnedPoints}/${totalPoints} points (${Math.round(progressPercentage)}%)`;
            
            // Show complete button if all questions solved
            if (solvedCount === 2) {
                document.getElementById('complete-challenge').style.display = 'flex';
            }
        }

        // Hint system
        document.getElementById('hint-btn').addEventListener('click', function() {
            if (challengeState.hintsUsed >= 3) {
                alert('You have used all available hints for this challenge.');
                return;
            }
            
            if (confirm('Using a hint will cost 5 points. Continue?')) {
                challengeState.hintsUsed++;
                
                // Show appropriate hint based on which questions are unsolved
                let hintMessage = '';
                
                if (!challengeState.q1.solved && !challengeState.q2.solved) {
                    hintMessage = 'Hint: Start with Q1 - use "john --format=raw-md5 --wordlist=wordlist_small.txt john_input_rawmd5.txt"';
                } else if (!challengeState.q1.solved) {
                    hintMessage = 'Hint for Q1: The password is related to the facility type. Check the wordlist carefully.';
                } else if (!challengeState.q2.solved) {
                    hintMessage = 'Hint for Q2: Look for "Accepted password" entries in auth.log and note the IP format.';
                } else {
                    hintMessage = 'You have already solved all questions!';
                }
                
                alert(`Hint #${challengeState.hintsUsed}: ${hintMessage}`);
                
                // Update hint button text
                this.innerHTML = `<span>💡</span> Get Hint (${3 - challengeState.hintsUsed} remaining)`;
                
                if (challengeState.hintsUsed >= 3) {
                    this.disabled = true;
                }
            }
        });

        // Complete challenge
        document.getElementById('complete-challenge').addEventListener('click', function() {
            const timeSpent = document.getElementById('challenge-timer').textContent;
            alert(`Challenge completed! Time spent: ${timeSpent}\nTotal points: 40/40\nReturning to challenges list...`);
            // In real app, this would redirect to challenges page
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Challenge detail page loaded');
            updateOverallProgress();
        });
    </script>
</body>
</html>