<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRDF Global - Admin Challenge Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-bg: #1a102b;
            --secondary-bg: #2d1b4e;
            --accent-color: #8a4fff;
            --accent-light: #a67cff;
            --accent-dark: #6b30e6;
            --text-primary: #f0e6ff;
            --text-secondary: #c2b0e6;
            --border-color: #4a2d7a;
            --card-bg: #35215a;
            --success-color: #6fcf97;
            --warning-color: #f2c94c;
            --danger-color: #eb5757;
            --gradient: linear-gradient(135deg, #6b30e6 0%, #8a4fff 100%);
            --admin-color: #ff6b6b;
            --mcq-color: #4da6ff;
            --fib-color: #ff9966;
        }
        
        body {
            background-color: var(--primary-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--text-primary);
        }
        
        .logo-icon {
            background: var(--gradient);
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-weight: bold;
        }
        
        .admin-badge {
            background: var(--admin-color);
            color: white;
            font-size: 12px;
            padding: 4px 12px;
            border-radius: 20px;
            margin-left: 12px;
        }
        
        .challenge-header {
            flex: 1;
        }
        
        .challenge-title {
            font-size: 32px;
            margin-bottom: 10px;
            color: var(--text-primary);
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        
        .challenge-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .difficulty {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .difficulty.easy {
            background: rgba(111, 207, 151, 0.2);
            color: var(--success-color);
        }
        
        .difficulty.medium {
            background: rgba(242, 201, 76, 0.2);
            color: var(--warning-color);
        }
        
        .difficulty.hard {
            background: rgba(235, 87, 87, 0.2);
            color: var(--danger-color);
        }
        
        .points {
            color: var(--accent-light);
            font-weight: bold;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
        }
          .artifacts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .artifact-item {
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .artifact-item:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }
        
        .artifact-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-primary);
        }
        
        .artifact-desc {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        }
        
        .btn-primary {
            background: var(--gradient);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(138, 79, 255, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--accent-color);
        }
        
        .btn-danger {
            background: var(--danger-color);
            color: white;
        }
        
        .btn-danger:hover {
            background: #d93636;
            transform: translateY(-2px);
        }
        
        .btn-mcq {
            background: var(--mcq-color);
            color: white;
        }
        
        .btn-fib {
            background: var(--fib-color);
            color: white;
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            margin-bottom: 25px;
        }
        
        .card-title {
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--accent-light);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-icon {
            font-size: 24px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-secondary);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        
        .form-row {
            display: flex;
            gap: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: var(--accent-light);
            border-bottom-color: var(--accent-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .questions-list {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .question-item {
            background: var(--secondary-bg);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 15px;
        }
        
        .question-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            flex: 1;
        }
        
        .question-points {
            background: var(--accent-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            white-space: nowrap;
        }
        
        .step-list {
            margin: 15px 0;
            padding-left: 20px;
        }
        
        .step-list li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }
        
        .flag-format {
            background: rgba(111, 207, 151, 0.1);
            border: 1px solid var(--success-color);
            border-radius: 6px;
            padding: 12px 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 14px;
        }
        
        .highlight-box {
            background: rgba(138, 79, 255, 0.1);
            border-left: 4px solid var(--accent-color);
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .status-draft {
            background: rgba(242, 201, 76, 0.2);
            color: var(--warning-color);
        }
        
        .status-published {
            background: rgba(111, 207, 151, 0.2);
            color: var(--success-color);
        }
        
        .status-archived {
            background: rgba(235, 87, 87, 0.2);
            color: var(--danger-color);
        }
        
        /* MCQ and FIB specific styles */
        .question-type-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .mcq-badge {
            background: rgba(77, 166, 255, 0.2);
            color: var(--mcq-color);
        }
        
        .fib-badge {
            background: rgba(255, 153, 102, 0.2);
            color: var(--fib-color);
        }
        
        .option-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding: 10px;
            background: var(--secondary-bg);
            border-radius: 6px;
        }
        
        .option-item input[type="text"] {
            flex: 1;
            padding: 8px 12px;
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-primary);
        }
        
        .option-item input[type="radio"] {
            margin: 0;
        }
        
        .option-item .remove-option {
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 4px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .add-option-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }
        
        .fib-blanks {
            margin: 15px 0;
        }
        
        .fib-blank {
            background: rgba(255, 153, 102, 0.1);
            border: 1px dashed var(--fib-color);
            border-radius: 4px;
            padding: 10px 15px;
            margin-bottom: 10px;
        }
        
        .fib-blank input {
            width: 100%;
            padding: 8px 12px;
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-primary);
            margin-top: 5px;
        }
        
        .question-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .question-type-btn {
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            border: 1px solid var(--border-color);
            background: var(--secondary-bg);
            color: var(--text-secondary);
            transition: all 0.3s;
        }
        
        .question-type-btn.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        
        /* Enhanced Hint System Styles */
        .hints-container {
            margin-top: 20px;
        }
        
        .hint-item {
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .hint-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .hint-title {
            font-weight: 600;
            color: var(--accent-light);
        }
        
        .hint-cost {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .hint-cost input {
            width: 60px;
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-primary);
            padding: 4px 8px;
        }
        
        .hint-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 10px;
            gap: 10px;
        }
        
        .hint-config {
            background: rgba(138, 79, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .config-row {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .config-label {
            min-width: 150px;
            color: var(--text-secondary);
        }
        
        .config-value {
            flex: 1;
        }
        
        .config-value input, .config-value select {
            width: 100%;
            padding: 8px 12px;
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-primary);
        }
        
        .clickable-editable {
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .clickable-editable:hover {
            background: rgba(138, 79, 255, 0.1);
        }
        
        .clickable-editable.editing {
            background: var(--secondary-bg);
            border: 1px solid var(--accent-color);
        }
        
        .question-stats {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .stat-value {
            color: var(--accent-light);
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-buttons .btn {
                width: 100%;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .config-row {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .config-label {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">C</div>
                CRDF Global <span class="admin-badge">ADMIN</span>
            </div>
            
            <div class="challenge-header">
                <h1 class="challenge-title">Challenge Management</h1>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">Create and manage cybersecurity challenges for the training platform</p>
                
                <div class="challenge-meta">
                    <div class="meta-item">
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="meta-item">
                        <span>🔒</span>
                        <span>OT/ICS Security</span>
                    </div>
                    <div class="meta-item">
                        <span>⏱️</span>
                        <span>Estimated: 45-60 mins</span>
                    </div>
                    <div class="meta-item">
                        <span>🏆</span>
                        <span class="points">5,000 pts total</span>
                    </div>
                    <div class="meta-item">
                        <span class="status-badge status-published">Published</span>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <a href="#" class="btn btn-secondary">
                    <span>📋</span>
                    Back to Admin Panel
                </a>
                <button class="btn btn-primary" id="save-challenge">
                    <span>💾</span>
                    Save Changes
                </button>
                <button class="btn btn-danger" id="delete-challenge">
                    <span>🗑️</span>
                    Delete Challenge
                </button>
            </div>
        </div>

        <!-- Tabs Navigation -->
        <div class="tabs">
            <div class="tab active" data-tab="basic">Basic Info</div>
            <div class="tab" data-tab="scenario">Scenario & Artifacts</div>
            <div class="tab" data-tab="questions">Flag-Based Questions</div>
            <div class="tab" data-tab="mcq-fib">MCQ & Fill-in-Blanks</div>
            <div class="tab" data-tab="preview">Preview</div>
        </div>

        <!-- Basic Info Tab -->
        <div id="basic" class="tab-content active">
            <div class="card">
                <h2 class="card-title">
                    <span class="card-icon">📝</span>
                    Challenge Information
                </h2>
                
                <div class="form-group">
                    <label class="form-label">Challenge Title</label>
                    <input type="text" class="form-control" value="Security CIT Challenge 2023">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-control">
                            <option>OT/ICS Security</option>
                            <option>Network Security</option>
                            <option>Web Application Security</option>
                            <option>Digital Forensics</option>
                            <option>Cryptography</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Difficulty</label>
                        <select class="form-control">
                            <option>Easy</option>
                            <option selected>Medium</option>
                            <option>Hard</option>
                            <option>Expert</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Total Points</label>
                        <input type="number" class="form-control" value="5000" min="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Time Estimate (minutes)</label>
                        <input type="number" class="form-control" value="60" min="0">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-control">
                        <option>Draft</option>
                        <option selected>Published</option>
                        <option>Archived</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Challenge Description</label>
                    <textarea class="form-control">A comprehensive cybersecurity challenge covering various aspects of OT/ICS security, including password cracking, log analysis, and security best practices.</textarea>
                </div>
            </div>
        </div>

          <!-- Scenario & Artifacts Tab -->
        <div id="scenario" class="tab-content">
            <div class="card">
                <h2 class="card-title">
                    <span class="card-icon">🎯</span>
                    Scenario Details
                </h2>
                
                <div class="form-group">
                    <label class="form-label">Scenario Text</label>
                    <textarea class="form-control" rows="6">A water treatment plant's engineering workstation (which has access to PLC programming and HMI configuration) shows signs of unauthorized activity. An attacker appears to have used compromised credentials to log into an engineering workstation, elevated privileges, and accessed control-related files. The artifacts provided are offline and safe for training.</textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">OT/ICS Context Notes</label>
                    <textarea class="form-control" rows="4">- The engineering workstation is used by OT staff to manage PLC setpoints and HMI screens.
- Compromise of service accounts on this host can directly affect process control.
- For safety, all exercises are offline and use synthetic artifacts.</textarea>
                </div>
            </div>
            
            <div class="card">
                <h2 class="card-title">
                    <span class="card-icon">📁</span>
                    Challenge Artifacts
                </h2>
                
                <div class="form-group">
                    <label class="form-label">Artifacts Description</label>
                    <textarea class="form-control">Download and analyze these files to solve the challenge:</textarea>
                </div>
                
                <div class="artifacts-grid">
                    <div class="artifact-item">
                        <div class="artifact-name">wordlist_small.txt</div>
                        <div class="artifact-desc">Password wordlist for cracking</div>
                    </div>
                    <div class="artifact-item">
                        <div class="artifact-name">john_input_rawmd5.txt</div>
                        <div class="artifact-desc">MD5 hashes for password cracking</div>
                    </div>
                    <div class="artifact-item">
                        <div class="artifact-name">auth.log</div>
                        <div class="artifact-desc">Authentication logs from engineering workstation</div>
                    </div>
                    <div class="artifact-item">
                        <div class="artifact-name">investigation_notes.txt</div>
                        <div class="artifact-desc">Initial investigation findings</div>
                    </div>
                    <div class="artifact-item">
                        <div class="artifact-name">passwd_copy.txt</div>
                        <div class="artifact-desc">User account information</div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-secondary">
                        <span>➕</span>
                        Add Artifact
                    </button>
                    <button class="btn btn-primary">
                        <span>📥</span>
                        Upload Artifacts
                    </button>
                </div>
            </div>
        </div>
        <!-- Questions & Hints Tab - Enhanced for 3 hints per question -->
        <div id="questions" class="tab-content">
            <div class="card">
                <h2 class="card-title">
                    <span class="card-icon">❓</span>
                    Flag-Based Questions (30 Questions, 3,000 Points Total)
                </h2>
                
                <div class="highlight-box">
                    <strong>Hint System:</strong> Each question can have up to 3 hints. Each hint reduces the score by 25 points. Students can use 1-3 hints per question.
                </div>
                
                <div class="questions-list">
                    <!-- Question 1 -->
                    <div class="question-item">
                        <div class="question-header">
                            <div class="question-title">
                                <span class="clickable-editable">Q1. Crack the password for svc_backup</span>
                            </div>
                            <div class="question-points">
                                <span class="clickable-editable">100</span> pts
                            </div>
                        </div>
                        
                        <div class="question-stats">
                            <div class="stat-item">
                                <span>Attempts:</span>
                                <span class="stat-value">3 max</span>
                            </div>
                            <div class="stat-item">
                                <span>Hints:</span>
                                <span class="stat-value">3 max</span>
                            </div>
                            <div class="stat-item">
                                <span>Hint Cost:</span>
                                <span class="stat-value">25 pts each</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Question Text</label>
                            <textarea class="form-control">Crack the password for svc_backup (an OT service account used for PLC backups) and submit the flag.</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Flag Format</label>
                            <input type="text" class="form-control" value="cracked_svc_backup_&lt;password&gt;">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Correct Answer</label>
                            <input type="text" class="form-control" value="cracked_svc_backup_water123">
                        </div>
                        
                    
                        
                        <div class="form-group">
                            <label class="form-label">Why This Matters (OT Context)</label>
                            <textarea class="form-control">Compromised OT service accounts can be used to alter PLCs or exfiltrate control logic.</textarea>
                        </div>
                        
                        <!-- Enhanced Hint Section for Question 1 -->
                        <div class="hint-config">
                            <div class="config-row">
                                <div class="config-label">Max Hints Allowed:</div>
                                <div class="config-value">
                                    <select>
                                        <option>0</option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option selected>3</option>
                                    </select>
                                </div>
                            </div>
                            <div class="config-row">
                                <div class="config-label">Points per Hint:</div>
                                <div class="config-value">
                                    <input type="number" value="25" min="0">
                                </div>
                            </div>
                            </div>
                        
                        <div class="hints-container">
                            <div class="hint-item">
                                <div class="hint-header">
                                    <div class="hint-title">Hint 1</div>
                                    <div class="hint-cost">
                                        Cost: <input type="number" value="25" min="0"> points
                                    </div>
                                </div>
                                <textarea class="form-control">The password is related to the facility type. Check the wordlist carefully.</textarea>
                            </div>
                            
                            <div class="hint-item">
                                <div class="hint-header">
                                    <div class="hint-title">Hint 2</div>
                                    <div class="hint-cost">
                                        Cost: <input type="number" value="25" min="0"> points
                                    </div>
                                </div>
                                <textarea class="form-control">The password is a combination of a common word and numbers.</textarea>
                            </div>
                            
                            <div class="hint-item">
                                <div class="hint-header">
                                    <div class="hint-title">Hint 3</div>
                                    <div class="hint-cost">
                                        Cost: <input type="number" value="25" min="0"> points
                                    </div>
                                </div>
                                <textarea class="form-control">Try passwords related to "water" followed by simple number sequences.</textarea>
                            </div>
                        </div>
                        
                        <div class="hint-actions">
                            <button class="btn btn-secondary add-hint">Add Hint</button>
                            <button class="btn btn-danger remove-hint">Remove Last Hint</button>
                        </div>
                    </div>
                    
                    <!-- Question 2 -->
                    <div class="question-item">
                        <div class="question-header">
                            <div class="question-title">
                                <span class="clickable-editable">Q2. Identify Attacker IP Address</span>
                            </div>
                            <div class="question-points">
                                <span class="clickable-editable">100</span> pts
                            </div>
                        </div>
                        
                        <div class="question-stats">
                            <div class="stat-item">
                                <span>Attempts:</span>
                                <span class="stat-value">3 max</span>
                            </div>
                            <div class="stat-item">
                                <span>Hints:</span>
                                <span class="stat-value">3 max</span>
                            </div>
                            <div class="stat-item">
                                <span>Hint Cost:</span>
                                <span class="stat-value">25 pts each</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Question Text</label>
                            <textarea class="form-control">Which IP did the attacker use to log in as svc_backup on the engineering workstation?</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Flag Format</label>
                            <input type="text" class="form-control" value="ip_&lt;address&gt;">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Correct Answer</label>
                            <input type="text" class="form-control" value="ip_192.168.1.205">
                        </div>
                        
                        
                        
                        <div class="form-group">
                            <label class="form-label">Why This Matters (OT Context)</label>
                            <textarea class="form-control">Identifying the source helps isolate the intrusion path and block attacker access.</textarea>
                        </div>
                        
                        <!-- Enhanced Hint Section for Question 2 -->
                        <div class="hint-config">
                            <div class="config-row">
                                <div class="config-label">Max Hints Allowed:</div>
                                <div class="config-value">
                                    <select>
                                        <option>0</option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option selected>3</option>
                                    </select>
                                </div>
                            </div>
                            <div class="config-row">
                                <div class="config-label">Points per Hint:</div>
                                <div class="config-value">
                                    <input type="number" value="25" min="0">
                                </div>
                            </div>
                            </div>
                        
                        <div class="hints-container">
                            <div class="hint-item">
                                <div class="hint-header">
                                    <div class="hint-title">Hint 1</div>
                                    <div class="hint-cost">
                                        Cost: <input type="number" value="25" min="0"> points
                                    </div>
                                </div>
                                <textarea class="form-control">Look for "Accepted password" entries in auth.log and note the IP format.</textarea>
                            </div>
                            
                            <div class="hint-item">
                                <div class="hint-header">
                                    <div class="hint-title">Hint 2</div>
                                    <div class="hint-cost">
                                        Cost: <input type="number" value="25" min="0"> points
                                    </div>
                                </div>
                                <textarea class="form-control">The IP address is in the 192.168.1.x range.</textarea>
                            </div>
                        </div>
                        
                        <div class="hint-actions">
                            <button class="btn btn-secondary add-hint">Add Hint</button>
                            <button class="btn btn-danger remove-hint">Remove Last Hint</button>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="add-question">
                        <span>➕</span>
                        Add Question
                    </button>
                    <button class="btn btn-secondary" id="bulk-import">
                        <span>📥</span>
                        Bulk Import Questions
                    </button>
                </div>
            </div>
        </div>

        <!-- MCQ & Fill-in-the-Blank Tab -->
        <div id="mcq-fib" class="tab-content">
            <div class="card">
                <h2 class="card-title">
                    <span class="card-icon">📝</span>
                    Multiple Choice & Fill-in-the-Blank Questions (20 Questions, 2,000 Points Total)
                </h2>
                
                <p style="color: var(--text-secondary); margin-bottom: 20px;">Create multiple choice and fill-in-the-blank questions for knowledge assessment. No hints available for these question types.</p>
                
                <div class="questions-list">
                    <!-- MCQ Example -->
                    <div class="question-item">
                        <div class="question-header">
                            <div class="question-title">
                                <span class="clickable-editable">Q1. OT Security Best Practices</span>
                                <span class="question-type-badge mcq-badge">MCQ</span>
                            </div>
                            <div class="question-points">
                                <span class="clickable-editable">100</span> pts
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Question Text</label>
                            <textarea class="form-control">Which of the following is NOT a recommended security practice for OT environments?</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Options</label>
                            <div class="options-container">
                                <div class="option-item">
                                    <input type="radio" name="mcq1" checked>
                                    <input type="text" value="Network segmentation between IT and OT networks">
                                    <button class="remove-option">×</button>
                                </div>
                                <div class="option-item">
                                    <input type="radio" name="mcq1">
                                    <input type="text" value="Regular patching of all systems during production hours">
                                    <button class="remove-option">×</button>
                                </div>
                                <div class="option-item">
                                    <input type="radio" name="mcq1">
                                    <input type="text" value="Application whitelisting on engineering workstations">
                                    <button class="remove-option">×</button>
                                </div>
                                <div class="option-item">
                                    <input type="radio" name="mcq1">
                                    <input type="text" value="Monitoring for unauthorized network connections">
                                    <button class="remove-option">×</button>
                                </div>
                            </div>
                            <button class="add-option-btn">+ Add Option</button>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Explanation (shown after answer)</label>
                            <textarea class="form-control">Patching OT systems during production hours can cause unexpected downtime and should be scheduled during maintenance windows.</textarea>
                        </div>
                    </div>
                    
                    <!-- Fill-in-the-Blank Example -->
                    <div class="question-item">
                        <div class="question-header">
                            <div class="question-title">
                                <span class="clickable-editable">Q2. PLC Security Concepts</span>
                                <span class="question-type-badge fib-badge">Fill-in-Blank</span>
                            </div>
                            <div class="question-points">
                                <span class="clickable-editable">100</span> pts
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Question Text with Blanks</label>
                            <textarea class="form-control">Programmable Logic Controllers (PLCs) are industrial computers used to control ______ processes. They are often targeted by attackers because they can directly manipulate ______ systems. The ______ protocol is commonly used to communicate with PLCs in industrial environments.</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Correct Answers for Blanks</label>
                            <div class="fib-blanks">
                                <div class="fib-blank">
                                    <label>Blank 1</label>
                                    <input type="text" value="manufacturing">
                                </div>
                                <div class="fib-blank">
                                    <label>Blank 2</label>
                                    <input type="text" value="physical">
                                </div>
                                <div class="fib-blank">
                                    <label>Blank 3</label>
                                    <input type="text" value="Modbus">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Acceptable Variations (comma separated)</label>
                            <input type="text" class="form-control" value="production, industrial, industrial control, ICS">
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="add-mcq">
                        <span>➕</span>
                        Add Multiple Choice
                    </button>
                    <button class="btn btn-primary" id="add-fib">
                        <span>➕</span>
                        Add Fill-in-Blank
                    </button>
                    <button class="btn btn-secondary" id="bulk-import-mcq">
                        <span>📥</span>
                        Bulk Import Questions
                    </button>
                </div>
            </div>
        </div>

        <!-- Preview Tab -->
        <div id="preview" class="tab-content">
            <div class="card">
                <h2 class="card-title">
                    <span class="card-icon">👁️</span>
                    Student View Preview
                </h2>
                
                <p style="color: var(--text-secondary); margin-bottom: 20px;">This is how students will see the challenge. The hints system will automatically deduct points when students use hints.</p>
                
                <div class="highlight-box">
                    <strong>Note:</strong> In the student view, the hint button will display: "Get Hint (-X pts)" where X is the point cost you configured for each question.
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary">
                        <span>🔍</span>
                        View Full Student Preview
                    </button>
                </div>
            </div>
            
            <div class="card">
                <h2 class="card-title">
                    <span class="card-icon">📊</span>
                    Challenge Analytics
                </h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <div style="background: var(--secondary-bg); border-radius: 10px; padding: 20px; text-align: center;">
                            <div style="font-size: 32px; font-weight: bold; margin-bottom: 5px;">247</div>
                            <div style="color: var(--text-secondary);">Total Attempts</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div style="background: var(--secondary-bg); border-radius: 10px; padding: 20px; text-align: center;">
                            <div style="font-size: 32px; font-weight: bold; margin-bottom: 5px;">78%</div>
                            <div style="color: var(--text-secondary);">Completion Rate</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div style="background: var(--secondary-bg); border-radius: 10px; padding: 20px; text-align: center;">
                            <div style="font-size: 32px; font-weight: bold; margin-bottom: 5px;">156</div>
                            <div style="color: var(--text-secondary);">Hint Uses</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div style="background: var(--secondary-bg); border-radius: 10px; padding: 20px; text-align: center;">
                            <div style="font-size: 32px; font-weight: bold; margin-bottom: 5px;">42 min</div>
                            <div style="color: var(--text-secondary);">Avg. Time</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Save Actions -->
        <div class="card">
            <div class="form-actions">
                <button class="btn btn-secondary">
                    <span>↶</span>
                    Discard Changes
                </button>
                <button class="btn btn-primary" id="publish-challenge">
                    <span>🚀</span>
                    Publish Challenge
                </button>
            </div>
        </div>
    </div>

    <script>
        // Tab functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                
                // Update active tab
                document.querySelectorAll('.tab').forEach(t => {
                    t.classList.remove('active');
                });
                this.classList.add('active');
                
                // Show corresponding content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Save challenge
        document.getElementById('save-challenge').addEventListener('click', function() {
            // In a real app, this would save to a database
            alert('Challenge saved successfully!');
        });
        
        // Delete challenge
        document.getElementById('delete-challenge').addEventListener('click', function() {
            if (confirm('Are you sure you want to delete this challenge? This action cannot be undone.')) {
                alert('Challenge deleted. Redirecting to challenge list...');
                // In a real app, this would redirect to the challenges list
            }
        });
        
        // Publish challenge
        document.getElementById('publish-challenge').addEventListener('click', function() {
            if (confirm('Publish this challenge to make it available to students?')) {
                alert('Challenge published successfully!');
                // In a real app, this would update the status and redirect
            }
        });
        
        // Clickable editable functionality
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('clickable-editable')) {
                const text = e.target.textContent;
                const input = document.createElement('input');
                input.type = 'text';
                input.value = text;
                input.style.width = '100%';
                input.style.background = 'var(--secondary-bg)';
                input.style.border = '1px solid var(--accent-color)';
                input.style.borderRadius = '4px';
                input.style.padding = '4px 8px';
                input.style.color = 'var(--text-primary)';
                
                e.target.parentNode.replaceChild(input, e.target);
                input.focus();
                
                input.addEventListener('blur', function() {
                    const span = document.createElement('span');
                    span.className = 'clickable-editable';
                    span.textContent = input.value;
                    input.parentNode.replaceChild(span, input);
                });
                
                input.addEventListener('keydown', function(event) {
                    if (event.key === 'Enter') {
                        input.blur();
                    }
                });
            }
        });
        
        // Add hint functionality
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('add-hint')) {
                const hintsContainer = e.target.closest('.question-item').querySelector('.hints-container');
                const hintCount = hintsContainer.children.length;
                
                if (hintCount < 3) {
                    const newHint = document.createElement('div');
                    newHint.className = 'hint-item';
                    newHint.innerHTML = `
                        <div class="hint-header">
                            <div class="hint-title">Hint ${hintCount + 1}</div>
                            <div class="hint-cost">
                                Cost: <input type="number" value="25" min="0"> points
                            </div>
                        </div>
                        <textarea class="form-control" placeholder="Enter hint text"></textarea>
                    `;
                    hintsContainer.appendChild(newHint);
                } else {
                    alert('Maximum of 3 hints allowed per question.');
                }
            }
        });
        
        // Remove hint functionality
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('remove-hint')) {
                const hintsContainer = e.target.closest('.question-item').querySelector('.hints-container');
                if (hintsContainer.children.length > 0) {
                    hintsContainer.lastChild.remove();
                }
            }
        });
        
        // Add new flag-based question
        document.getElementById('add-question').addEventListener('click', function() {
            const questionsList = document.querySelector('#questions .questions-list');
            const questionCount = questionsList.children.length + 1;
            
            const newQuestion = document.createElement('div');
            newQuestion.className = 'question-item';
            newQuestion.innerHTML = `
                <div class="question-header">
                    <div class="question-title">
                        <span class="clickable-editable">Q${questionCount}. New Question</span>
                    </div>
                    <div class="question-points">
                        <span class="clickable-editable">100</span> pts
                    </div>
                </div>
                
                <div class="question-stats">
                    <div class="stat-item">
                        <span>Attempts:</span>
                        <span class="stat-value">3 max</span>
                    </div>
                    <div class="stat-item">
                        <span>Hints:</span>
                        <span class="stat-value">3 max</span>
                    </div>
                    <div class="stat-item">
                        <span>Hint Cost:</span>
                        <span class="stat-value">25 pts each</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Question Text</label>
                    <textarea class="form-control" placeholder="Enter your question here"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Flag Format</label>
                    <input type="text" class="form-control" placeholder="flag{...}">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Correct Answer</label>
                    <input type="text" class="form-control" placeholder="Enter the correct flag">
                </div>
                
                
                
                <div class="form-group">
                    <label class="form-label">Why This Matters (OT Context)</label>
                    <textarea class="form-control" placeholder="Explain the OT security relevance of this question"></textarea>
                </div>
                
                <div class="hint-config">
                    <div class="config-row">
                        <div class="config-label">Max Hints Allowed:</div>
                        <div class="config-value">
                            <select>
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option selected>3</option>
                            </select>
                        </div>
                    </div>
                    <div class="config-row">
                        <div class="config-label">Points per Hint:</div>
                        <div class="config-value">
                            <input type="number" value="25" min="0">
                        </div>
                    </div>
                    </div>
                
                <div class="hints-container">
                    <div class="hint-item">
                        <div class="hint-header">
                            <div class="hint-title">Hint 1</div>
                            <div class="hint-cost">
                                Cost: <input type="number" value="25" min="0"> points
                            </div>
                        </div>
                        <textarea class="form-control" placeholder="Enter hint text"></textarea>
                    </div>
                </div>
                
                <div class="hint-actions">
                    <button class="btn btn-secondary add-hint">Add Hint</button>
                    <button class="btn btn-danger remove-hint">Remove Last Hint</button>
                </div>
                
                <div class="action-buttons" style="margin-top: 20px;">
                    <button class="btn btn-danger remove-question">Remove Question</button>
                </div>
            `;
            
            questionsList.appendChild(newQuestion);
        });
        
        // Remove question
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('remove-question')) {
                if (confirm('Are you sure you want to remove this question?')) {
                    e.target.closest('.question-item').remove();
                }
            }
        });
        
        // Initialize with some sample data
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Enhanced admin challenge management page loaded');
        });
    </script>
</body>
</html>